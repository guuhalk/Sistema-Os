<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	template="/templates/template.xhtml">

	<ui:define name="header">
	</ui:define>

	<ui:define name="content">
		<b:growl id="growlMsg" globalOnly="true" placementFrom="top"
			show-detail="true" show-summary="false" delay="2000" escape="true" />

		<h:form enctype="multipart/form-data">
			<b:container>
				<br></br>
				<b:column span="10">

					<h3>Alocar - Os</h3>
					<hr></hr>
					<br></br>

				</b:column>

				<b:column span="2">
					<b:commandLink look="default" value="Pesquisar Os"
						icon="glyphicon glyphicon-search"
						style=" padding: 3%; font-size: 90%;"
						action="#{analistaOsBean.redirecionarPaginasParaPesquisarOs}" />

				</b:column>

				<hr></hr>
				<br></br>



				<b:column span="10">
					<b:row>
						<b:column span="1">
							<p:outputLabel value="Id" />
						</b:column>

						<b:column span="4">
							<p:outputLabel value="Titulo" />
						</b:column>

						<b:column span="2">
							<p:outputLabel value="Data" />
						</b:column>

						<b:column span="2">
							<p:outputLabel value="Ações" />
						</b:column>
					</b:row>
					<hr />

					<b:row>
						<ui:repeat value="#{alocarOsBean.listaChamado}" var="os">

							<b:column span="1">
								<p:outputLabel style="font-size:100%;font-weight: normal;"
									value="#{os.osId}" />
							</b:column>


							<b:column span="4">
								<p:outputLabel style="font-size:100%;font-weight: normal;"
									value="#{os.tituloOs}" />
							</b:column>

							<b:column span="2">
								<p:outputLabel style="font-size:100%;font-weight: normal;"
									value="#{os.dataOs}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:outputLabel>
							</b:column>

							<b:column span="2">

								<p:commandLink value="Alocar" style="font-size:80%;"
									oncomplete="$('.modalPseudoClass').modal('show')"
									update="@all" styleClass="btn btn-default">

									<f:setPropertyActionListener value="#{os}"
										target="#{alocarOsBean.chamadoSelecionado}" />

								</p:commandLink>

							</b:column>
							<br />
							<br />

						</ui:repeat>

					</b:row>


				</b:column>

			</b:container>
		</h:form>

		<h:form>
			<b:modal id="modal"  title="Alocar Chamado " styleClass="modalPseudoClass"
				closable="false" >
				<b:row>

					<b:column span="7">
						<b:inputTextarea rows="12" label="Descrição: "
							value="#{alocarOsBean.chamadoSelecionado.descricaoOs}" disabled="true" />
					</b:column>

					<b:column span="5">
						<b:dateTimePicker show-time="false" label="Data Entrga:" value="#{alocarOsBean.dataPrevisao}" />

						<b:selectOneMenu value="#{alocarOsBean.responsavel}"
							label="Responsavel:">

							<f:selectItem itemLabel="Selecione" noSelectionOption="true" />
							<f:selectItems value="#{alocarOsBean.listaDeAnalistas}" var="usu"
								itemLabel="#{usu.usuNome}" itemValue="#{usu.usuId}" />
							<f:converter converterId="genericConverter" />
						</b:selectOneMenu>

						<p:outputLabel value="Tipo :" />
						
						<b:radiobutton value="#{alocarOsBean.tipo}">
							<f:selectItem itemValue="1" itemLabel="Acesso" />
							<f:selectItem itemValue="2" itemLabel="Manutenção" />
							<f:selectItem itemValue="3" itemLabel="Criação" />
						</b:radiobutton>
					</b:column>
				</b:row>
				<f:facet name="footer">
					<div id="rodape" style="display: flex; float: right;">
						<b:commandLink style="float:right;" value="Fechar"
						  onclick="$('.modalPseudoClass').modal('hide')"
						  styleClass="btn btn-default"
						  update="@form"
						 />
						
						<p:commandLink look="success"  value="Salvar"  style="float:right;" styleClass="btn btn-success" action="#{alocarOsBean.alocarChamado}"
						update="@all">
							
						</p:commandLink>
					</div>
				</f:facet>

			</b:modal>
		</h:form>
	</ui:define>
</ui:composition>